(function(e){function t(t){for(var r,o,c=t[0],i=t[1],l=t[2],u=0,b=[];u<c.length;u++)o=c[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&b.push(a[o][0]),a[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);d&&d(t);while(b.length)b.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],r=!0,o=1;o<s.length;o++){var i=s[o];0!==a[i]&&(r=!1)}r&&(n.splice(t--,1),e=c(c.s=s[0]))}return e}var r={},a={app:0},n=[];function o(e){return c.p+"static/js/"+({}[e]||e)+"."+{"chunk-2d0a4c1e":"49c77c86","chunk-2d0aecf7":"52ce4833","chunk-2d0c85f8":"db17460c","chunk-2d0d03d6":"e9f13bfb"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.e=function(e){var t=[],s=a[e];if(0!==s)if(s)t.push(s[2]);else{var r=new Promise((function(t,r){s=a[e]=[t,r]}));t.push(s[2]=r);var n,i=document.createElement("script");i.charset="utf-8",i.timeout=120,c.nc&&i.setAttribute("nonce",c.nc),i.src=o(e);var l=new Error;n=function(t){i.onerror=i.onload=null,clearTimeout(u);var s=a[e];if(0!==s){if(s){var r=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+n+")",l.name="ChunkLoadError",l.type=r,l.request=n,s[1](l)}a[e]=void 0}};var u=setTimeout((function(){n({type:"timeout",target:i})}),12e4);i.onerror=i.onload=n,document.head.appendChild(i)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,s){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(s,r,function(t){return e[t]}.bind(null,r));return s},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var d=l;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"1f57":function(e,t,s){"use strict";var r=s("7424");class a{getPublicContent(){return r["a"].get("/test/all")}getUserBoard(){return r["a"].get("/test/user")}getStaffBoard(){return r["a"].get("/test/staff")}getAdminBoard(){return r["a"].get("/test/admin")}}t["a"]=new a},"246a":function(e,t,s){},"30ef":function(e,t,s){"use strict";const r={on(e,t){document.addEventListener(e,e=>t(e.detail))},dispatch(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))},remove(e,t){document.removeEventListener(e,t)}};t["a"]=r},"56d7":function(e,t,s){"use strict";s.r(t);var r=s("7a23");const a={id:"app"},n={class:"navbar navbar-expand navbar-dark bg-dark"},o=Object(r["g"])("a",{href:"/",class:"navbar-brand"},"KYUNGSEO.PoC",-1),c={class:"navbar-nav mr-auto"},i={class:"nav-item"},l={key:0,class:"nav-item"},u={key:1,class:"nav-item"},d={class:"nav-item"},b={key:0,class:"navbar-nav ml-auto"},m={class:"nav-item"},g={class:"nav-item"},O={key:1,class:"navbar-nav ml-auto"},p={class:"nav-item"},f={class:"nav-item"},h={class:"container"};function j(e,t,s,j,v,k){const y=Object(r["E"])("font-awesome-icon"),w=Object(r["E"])("router-link"),S=Object(r["E"])("router-view");return Object(r["x"])(),Object(r["f"])("div",a,[Object(r["g"])("nav",n,[o,Object(r["g"])("div",c,[Object(r["g"])("li",i,[Object(r["i"])(w,{to:"/home",class:"nav-link"},{default:Object(r["O"])(()=>[Object(r["i"])(y,{icon:"home"}),Object(r["h"])(" Home ")]),_:1})]),k.showAdminBoard?(Object(r["x"])(),Object(r["f"])("li",l,[Object(r["i"])(w,{to:"/admin",class:"nav-link"},{default:Object(r["O"])(()=>[Object(r["h"])("Admin Board")]),_:1})])):Object(r["e"])("",!0),k.showStaffBoard?(Object(r["x"])(),Object(r["f"])("li",u,[Object(r["i"])(w,{to:"/mod",class:"nav-link"},{default:Object(r["O"])(()=>[Object(r["h"])("Staff Board")]),_:1})])):Object(r["e"])("",!0),Object(r["g"])("li",d,[k.currentUser?(Object(r["x"])(),Object(r["d"])(w,{key:0,to:"/user",class:"nav-link"},{default:Object(r["O"])(()=>[Object(r["h"])("User")]),_:1})):Object(r["e"])("",!0)])]),k.currentUser?Object(r["e"])("",!0):(Object(r["x"])(),Object(r["f"])("div",b,[Object(r["g"])("li",m,[Object(r["i"])(w,{to:"/register",class:"nav-link"},{default:Object(r["O"])(()=>[Object(r["i"])(y,{icon:"user-plus"}),Object(r["h"])(" Sign Up ")]),_:1})]),Object(r["g"])("li",g,[Object(r["i"])(w,{to:"/login",class:"nav-link"},{default:Object(r["O"])(()=>[Object(r["i"])(y,{icon:"sign-in-alt"}),Object(r["h"])(" Login ")]),_:1})])])),k.currentUser?(Object(r["x"])(),Object(r["f"])("div",O,[Object(r["g"])("li",p,[Object(r["i"])(w,{to:"/profile",class:"nav-link"},{default:Object(r["O"])(()=>[Object(r["i"])(y,{icon:"user"}),Object(r["h"])(" "+Object(r["H"])(k.currentUser.username),1)]),_:1})]),Object(r["g"])("li",f,[Object(r["g"])("a",{class:"nav-link",onClick:t[0]||(t[0]=Object(r["Q"])((...e)=>k.logOut&&k.logOut(...e),["prevent"]))},[Object(r["i"])(y,{icon:"sign-out-alt"}),Object(r["h"])(" LogOut ")])])])):Object(r["e"])("",!0)]),Object(r["g"])("div",h,[Object(r["i"])(S)])])}s("14d9");var v=s("30ef"),k={computed:{currentUser(){return this.$store.state.auth.user},showAdminBoard(){return!(!this.currentUser||!this.currentUser["roles"])&&this.currentUser["roles"].includes("ROLE_ADMIN")},showStaffBoard(){return!(!this.currentUser||!this.currentUser["roles"])&&this.currentUser["roles"].includes("ROLE_STAFF")}},methods:{logOut(){this.$store.dispatch("auth/logout"),this.$router.push("/login")}},mounted(){v["a"].on("logout",()=>{this.logOut()})},beforeUnmount(){v["a"].remove("logout")}},y=s("6b0d"),w=s.n(y);const S=w()(k,[["render",j]]);var U=S,I=s("6605");const x={class:"container"},E={class:"jumbotron"};function T(e,t,s,a,n,o){return Object(r["x"])(),Object(r["f"])("div",x,[Object(r["g"])("header",E,[Object(r["g"])("h3",null,Object(r["H"])(n.content),1)])])}var _=s("1f57"),P={name:"Home",data(){return{content:""}},mounted(){_["a"].getPublicContent().then(e=>{this.content=e.data},e=>{this.content=e.response&&e.response.data&&e.response.data.message||e.message||e.toString()})}};const L=w()(P,[["render",T]]);var A=L;const F=e=>(Object(r["A"])("data-v-298d3b3a"),e=e(),Object(r["y"])(),e),M={class:"col-md-12"},q={class:"card card-container"},D=F(()=>Object(r["g"])("img",{id:"profile-img",src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",class:"profile-img-card"},null,-1)),N={class:"form-group"},B=F(()=>Object(r["g"])("label",{for:"username"},"Username",-1)),J={class:"form-group"},R=F(()=>Object(r["g"])("label",{for:"password"},"Password",-1)),$={class:"form-group"},C=["disabled"],H={class:"spinner-border spinner-border-sm"},K=F(()=>Object(r["g"])("span",null,"Login",-1)),Y={class:"form-group"},z={key:0,class:"alert alert-danger",role:"alert"};function G(e,t,s,a,n,o){const c=Object(r["E"])("Field"),i=Object(r["E"])("ErrorMessage"),l=Object(r["E"])("Form");return Object(r["x"])(),Object(r["f"])("div",M,[Object(r["g"])("div",q,[D,Object(r["i"])(l,{onSubmit:o.handleLogin,"validation-schema":n.schema},{default:Object(r["O"])(()=>[Object(r["g"])("div",N,[B,Object(r["i"])(c,{name:"username",type:"text",class:"form-control"}),Object(r["i"])(i,{name:"username",class:"error-feedback"})]),Object(r["g"])("div",J,[R,Object(r["i"])(c,{name:"password",type:"password",class:"form-control"}),Object(r["i"])(i,{name:"password",class:"error-feedback"})]),Object(r["g"])("div",$,[Object(r["g"])("button",{class:"btn btn-primary btn-block",disabled:n.loading},[Object(r["P"])(Object(r["g"])("span",H,null,512),[[r["K"],n.loading]]),K],8,C)]),Object(r["g"])("div",Y,[n.message?(Object(r["x"])(),Object(r["f"])("div",z,Object(r["H"])(n.message),1)):Object(r["e"])("",!0)])]),_:1},8,["onSubmit","validation-schema"])])])}var Q=s("7bb1"),V=s("506a"),W=s("500b");class X{getDeviceUUID(){let e=(new W["DeviceUUID"]).get();return console.log("Device UUID: "+e),e}}var Z=new X,ee={name:"Login",components:{Form:Q["c"],Field:Q["b"],ErrorMessage:Q["a"]},data(){const e=V["a"]().shape({username:V["b"]().required("Username is required!"),password:V["b"]().required("Password is required!")});return{loading:!1,message:"",schema:e}},computed:{loggedIn(){return this.$store.state.auth.status.loggedIn}},created(){this.loggedIn&&this.$router.push("/profile")},methods:{handleLogin(e){this.loading=!0,e.email=e.username,e.deviceInfo={deviceId:Z.getDeviceUUID(),deviceType:"DEVICE_TYPE_ANDROID",notificationToken:"notificationToken"},this.$store.dispatch("auth/login",e).then(()=>{this.$router.push("/profile")},e=>{this.loading=!1,this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString()})}}};s("9a7e");const te=w()(ee,[["render",G],["__scopeId","data-v-298d3b3a"]]);var se=te;const re=e=>(Object(r["A"])("data-v-624fa633"),e=e(),Object(r["y"])(),e),ae={class:"col-md-12"},ne={class:"card card-container"},oe=re(()=>Object(r["g"])("img",{id:"profile-img",src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",class:"profile-img-card"},null,-1)),ce={key:0},ie={class:"form-group"},le=re(()=>Object(r["g"])("label",{for:"username"},"Username",-1)),ue={class:"form-group"},de=re(()=>Object(r["g"])("label",{for:"email"},"Email",-1)),be={class:"form-group"},me=re(()=>Object(r["g"])("label",{for:"password"},"Password",-1)),ge={class:"form-group"},Oe=["disabled"],pe={class:"spinner-border spinner-border-sm"};function fe(e,t,s,a,n,o){const c=Object(r["E"])("Field"),i=Object(r["E"])("ErrorMessage"),l=Object(r["E"])("Form");return Object(r["x"])(),Object(r["f"])("div",ae,[Object(r["g"])("div",ne,[oe,Object(r["i"])(l,{onSubmit:o.handleRegister,"validation-schema":n.schema},{default:Object(r["O"])(()=>[n.successful?Object(r["e"])("",!0):(Object(r["x"])(),Object(r["f"])("div",ce,[Object(r["g"])("div",ie,[le,Object(r["i"])(c,{name:"username",type:"text",class:"form-control"}),Object(r["i"])(i,{name:"username",class:"error-feedback"})]),Object(r["g"])("div",ue,[de,Object(r["i"])(c,{name:"email",type:"email",class:"form-control"}),Object(r["i"])(i,{name:"email",class:"error-feedback"})]),Object(r["g"])("div",be,[me,Object(r["i"])(c,{name:"password",type:"password",class:"form-control"}),Object(r["i"])(i,{name:"password",class:"error-feedback"})]),Object(r["g"])("div",ge,[Object(r["g"])("button",{class:"btn btn-primary btn-block",disabled:n.loading},[Object(r["P"])(Object(r["g"])("span",pe,null,512),[[r["K"],n.loading]]),Object(r["h"])(" Sign Up ")],8,Oe)])]))]),_:1},8,["onSubmit","validation-schema"]),n.message?(Object(r["x"])(),Object(r["f"])("div",{key:0,class:Object(r["r"])(["alert",n.successful?"alert-success":"alert-danger"])},Object(r["H"])(n.message),3)):Object(r["e"])("",!0)])])}var he={name:"Register",components:{Form:Q["c"],Field:Q["b"],ErrorMessage:Q["a"]},data(){const e=V["a"]().shape({username:V["b"]().required("Username is required!").min(3,"Must be at least 3 characters!").max(20,"Must be maximum 20 characters!"),email:V["b"]().required("Email is required!").email("Email is invalid!").max(50,"Must be maximum 50 characters!"),password:V["b"]().required("Password is required!").min(6,"Must be at least 6 characters!").max(40,"Must be maximum 40 characters!")});return{successful:!1,loading:!1,message:"",schema:e}},computed:{loggedIn(){return this.$store.state.auth.status.loggedIn}},mounted(){this.loggedIn&&this.$router.push("/profile")},methods:{handleRegister(e){this.message="",this.successful=!1,this.loading=!0,this.$store.dispatch("auth/register",e).then(e=>{this.message=e.message,this.successful=!0,this.loading=!1},e=>{this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.successful=!1,this.loading=!1})}}};s("c13d");const je=w()(he,[["render",fe],["__scopeId","data-v-624fa633"]]);var ve=je;const ke=()=>s.e("chunk-2d0d03d6").then(s.bind(null,"66aa")),ye=()=>s.e("chunk-2d0c85f8").then(s.bind(null,"5535")),we=()=>s.e("chunk-2d0aecf7").then(s.bind(null,"0c3a")),Se=()=>s.e("chunk-2d0a4c1e").then(s.bind(null,"0899")),Ue=[{path:"/",name:"home",component:A},{path:"/home",component:A},{path:"/login",component:se},{path:"/register",component:ve},{path:"/profile",name:"profile",component:ke},{path:"/admin",name:"admin",component:ye},{path:"/staff",name:"staff",component:we},{path:"/user",name:"user",component:Se}],Ie=Object(I["a"])({history:Object(I["b"])(),routes:Ue});var xe=Ie,Ee=s("5502"),Te=s("7424");class _e{getLocalRefreshToken(){const e=JSON.parse(localStorage.getItem("user"));return null===e||void 0===e?void 0:e.refreshToken}getLocalAccessToken(){const e=JSON.parse(localStorage.getItem("user"));return null===e||void 0===e?void 0:e.accessToken}updateLocalAccessToken(e){let t=JSON.parse(localStorage.getItem("user"));t.accessToken=e,localStorage.setItem("user",JSON.stringify(t))}getUser(){return JSON.parse(localStorage.getItem("user"))}setUser(e){console.log(JSON.stringify(e)),localStorage.setItem("user",JSON.stringify(e))}removeUser(){localStorage.removeItem("user")}}var Pe=new _e;class Le{login(e){return Te["a"].post("/auth/login",e).then(e=>(console.log("Response: "+e),e.data.accessToken&&Pe.setUser(e.data),e.data))}logout(){Pe.removeUser()}register({username:e,email:t,password:s}){return Te["a"].post("/auth/register",{username:e,email:t,password:s})}}var Ae=new Le;const Fe=JSON.parse(localStorage.getItem("user")),Me=Fe?{status:{loggedIn:!0},user:Fe}:{status:{loggedIn:!1},user:null},qe={namespaced:!0,state:Me,actions:{login({commit:e},t){return Ae.login(t).then(t=>(e("loginSuccess",t),Promise.resolve(t)),t=>(e("loginFailure"),Promise.reject(t)))},logout({commit:e}){Ae.logout(),e("logout")},register({commit:e},t){return Ae.register(t).then(t=>(e("registerSuccess"),Promise.resolve(t.data)),t=>(e("registerFailure"),Promise.reject(t)))},refreshToken({commit:e},t){e("refreshToken",t)}},mutations:{loginSuccess(e,t){e.status.loggedIn=!0,e.user=t},loginFailure(e){e.status.loggedIn=!1,e.user=null},logout(e){e.status.loggedIn=!1,e.user=null},registerSuccess(e){e.status.loggedIn=!1},registerFailure(e){e.status.loggedIn=!1},refreshToken(e,t){e.status.loggedIn=!0,e.user={...e.user,accessToken:t}}}},De=Object(Ee["a"])({modules:{auth:qe}});var Ne=De,Be=(s("4989"),s("ab8b"),s("ecee")),Je=s("ad3d"),Re=s("c074");Be["c"].add(Re["a"],Re["d"],Re["e"],Re["b"],Re["c"]);const $e=e=>{Te["a"].interceptors.request.use(e=>{const t=Pe.getLocalAccessToken();return t&&(e.headers["Authorization"]="Bearer "+t),e},e=>Promise.reject(e)),Te["a"].interceptors.response.use(e=>e,async t=>{const s=t.config;if("/auth/login"!==s.url&&t.response&&401===t.response.status&&!s._retry){s._retry=!0;try{const t=await Te["a"].post("/auth/refresh",{refreshToken:Pe.getLocalRefreshToken()}),{accessToken:r}=t.data;return e.dispatch("auth/refreshToken",r),Pe.updateLocalAccessToken(r),Object(Te["a"])(s)}catch(r){return Promise.reject(r)}}return Promise.reject(t)})};var Ce=$e;Ce(Ne),Object(r["c"])(U).use(xe).use(Ne).component("font-awesome-icon",Je["a"]).mount("#app")},7424:function(e,t,s){"use strict";var r=s("bc3a"),a=s.n(r);const n=a.a.create({baseURL:"http://localhost:8090/api/v1",headers:{"Content-Type":"application/json"}});t["a"]=n},"9a7e":function(e,t,s){"use strict";s("a45c")},a45c:function(e,t,s){},c13d:function(e,t,s){"use strict";s("246a")}});
//# sourceMappingURL=app.df77ed8d.js.map