(function(e){function t(t){for(var a,o,c=t[0],i=t[1],l=t[2],u=0,b=[];u<c.length;u++)o=c[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&b.push(r[o][0]),r[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);d&&d(t);while(b.length)b.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],a=!0,o=1;o<s.length;o++){var i=s[o];0!==r[i]&&(a=!1)}a&&(n.splice(t--,1),e=c(c.s=s[0]))}return e}var a={},r={app:0},n=[];function o(e){return c.p+"static/js/"+({}[e]||e)+"."+{"chunk-2d0a4c1e":"497a6732","chunk-2d0aecf7":"5b2acb2f","chunk-2d0c85f8":"a4c680aa","chunk-2d0d03d6":"4b592558"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.e=function(e){var t=[],s=r[e];if(0!==s)if(s)t.push(s[2]);else{var a=new Promise((function(t,a){s=r[e]=[t,a]}));t.push(s[2]=a);var n,i=document.createElement("script");i.charset="utf-8",i.timeout=120,c.nc&&i.setAttribute("nonce",c.nc),i.src=o(e);var l=new Error;n=function(t){i.onerror=i.onload=null,clearTimeout(u);var s=r[e];if(0!==s){if(s){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+n+")",l.name="ChunkLoadError",l.type=a,l.request=n,s[1](l)}r[e]=void 0}};var u=setTimeout((function(){n({type:"timeout",target:i})}),12e4);i.onerror=i.onload=n,document.head.appendChild(i)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,s){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(s,a,function(t){return e[t]}.bind(null,a));return s},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var d=l;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"1f57":function(e,t,s){"use strict";var a=s("7424");class r{getPublicContent(){return a["a"].get("/test/all")}getUserBoard(){return a["a"].get("/test/user")}getStaffBoard(){return a["a"].get("/test/staff")}getAdminBoard(){return a["a"].get("/test/admin")}getAll(){return a["a"].get("/admin/usermgmt/users")}get(e){return a["a"].get("/admin/usermgmt/users/"+e)}create(e){return a["a"].post("/admin/usermgmt/users",e)}update(e,t){return a["a"].put("/admin/usermgmt/users/"+e,t)}delete(e){return a["a"].delete("/admin/usermgmt/users/"+e)}}t["a"]=new r},"30ef":function(e,t,s){"use strict";const a={on(e,t){document.addEventListener(e,e=>t(e.detail))},dispatch(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))},remove(e,t){document.removeEventListener(e,t)}};t["a"]=a},"56d7":function(e,t,s){"use strict";s.r(t);var a=s("7a23");const r={id:"app"},n={class:"navbar navbar-expand navbar-dark bg-dark"},o=Object(a["g"])("a",{href:"/",class:"navbar-brand"},"KYUNGSEO.PoC",-1),c={class:"navbar-nav mr-auto"},i={class:"nav-item"},l={key:0,class:"nav-item"},u={key:1,class:"nav-item"},d={class:"nav-item"},b={key:0,class:"navbar-nav ml-auto"},g={class:"nav-item"},m={class:"nav-item"},j={key:1,class:"navbar-nav ml-auto"},O={class:"nav-item"},p={class:"nav-item"},f={class:"container"},h=Object(a["g"])("div",{id:"notification"},null,-1),v=Object(a["g"])("div",null,[Object(a["g"])("br")],-1);function k(e,t,s,k,y,S){const w=Object(a["H"])("font-awesome-icon"),I=Object(a["H"])("router-link"),T=Object(a["H"])("toast"),U=Object(a["H"])("router-view");return Object(a["z"])(),Object(a["f"])("div",r,[Object(a["g"])("nav",n,[o,Object(a["g"])("div",c,[Object(a["g"])("li",i,[Object(a["j"])(I,{to:"/home",class:"nav-link"},{default:Object(a["S"])(()=>[Object(a["j"])(w,{icon:"home"}),Object(a["i"])(" Home ")]),_:1})]),S.showAdminBoard?(Object(a["z"])(),Object(a["f"])("li",l,[Object(a["j"])(I,{to:"/admin",class:"nav-link"},{default:Object(a["S"])(()=>[Object(a["i"])("Admin Board")]),_:1})])):Object(a["e"])("",!0),S.showStaffBoard?(Object(a["z"])(),Object(a["f"])("li",u,[Object(a["j"])(I,{to:"/staff",class:"nav-link"},{default:Object(a["S"])(()=>[Object(a["i"])("Staff Board")]),_:1})])):Object(a["e"])("",!0),Object(a["g"])("li",d,[S.currentUser?(Object(a["z"])(),Object(a["d"])(I,{key:0,to:"/user",class:"nav-link"},{default:Object(a["S"])(()=>[Object(a["i"])("User")]),_:1})):Object(a["e"])("",!0)])]),S.currentUser?Object(a["e"])("",!0):(Object(a["z"])(),Object(a["f"])("div",b,[Object(a["g"])("li",g,[Object(a["j"])(I,{to:"/register",class:"nav-link"},{default:Object(a["S"])(()=>[Object(a["j"])(w,{icon:"user-plus"}),Object(a["i"])(" Sign Up ")]),_:1})]),Object(a["g"])("li",m,[Object(a["j"])(I,{to:"/login",class:"nav-link"},{default:Object(a["S"])(()=>[Object(a["j"])(w,{icon:"sign-in-alt"}),Object(a["i"])(" Login ")]),_:1})])])),S.currentUser?(Object(a["z"])(),Object(a["f"])("div",j,[Object(a["g"])("li",O,[Object(a["j"])(I,{to:"/profile",class:"nav-link"},{default:Object(a["S"])(()=>[Object(a["j"])(w,{icon:"user"}),Object(a["i"])(" "+Object(a["K"])(S.currentUser.username),1)]),_:1})]),Object(a["g"])("li",p,[Object(a["g"])("a",{class:"nav-link",onClick:t[0]||(t[0]=Object(a["V"])((...e)=>S.logOut&&S.logOut(...e),["prevent"]))},[Object(a["j"])(w,{icon:"sign-out-alt"}),Object(a["i"])(" LogOut ")])])])):Object(a["e"])("",!0)]),Object(a["g"])("div",f,[Object(a["j"])(T),h,Object(a["i"])(" ※ 오늘 일자: "),Object(a["g"])("em",null,Object(a["K"])(k.today),1),v,Object(a["j"])(U)])])}s("14d9");var y=s("30ef"),S=s("cf05"),w=s.n(S);const I={style:{position:"absolute",top:"60px",right:"10px"}},T={class:"toast-header"},U=Object(a["g"])("img",{src:w.a,class:"rounded me-2",alt:"Vue 3 데모",width:"15",height:"15"},null,-1),_=Object(a["g"])("strong",{class:"me-auto"},"Warning",-1),E=["onClick"],D={class:"toast-body"};function P(e,t,s,r,n,o){return Object(a["z"])(),Object(a["f"])("div",I,[(Object(a["z"])(!0),Object(a["f"])(a["a"],null,Object(a["F"])(r.toasts.data,e=>(Object(a["z"])(),Object(a["f"])("div",{key:e.id,class:"toast show text-white bg-danger",role:"alert"},[Object(a["g"])("div",T,[U,_,Object(a["g"])("button",{type:"button",class:"btn-close",onClick:t=>r.onClose(e.id)},null,8,E)]),Object(a["g"])("div",D,Object(a["K"])(e.message),1)]))),128))])}s("3c65");var A={setup(){const e=Object(a["o"])("toast",""),t=Object(a["D"])({data:[]});let s=0;Object(a["Q"])(()=>e,a=>{if(a.value.length>0){const r=s++;t.data.unshift({id:r,message:a.value,start:(new Date).getTime()}),e.value=""}},{deep:!0});const r=e=>{t.data=t.data.filter(t=>t.id!=e)};return Object(a["x"])(()=>{setInterval(()=>{const e=(new Date).getTime();t.data.forEach(s=>{e-s.start>5e3&&(t.data=t.data.filter(e=>e.id!=s.id))})})}),{toasts:t,onClose:r}}},L=s("6b0d"),x=s.n(L);const z=x()(A,[["render",P]]);var C=z,F={name:"App",setup(){const e=Object(a["E"])("");Object(a["B"])("toast",e);const t=Object(a["o"])("today");return{today:t}},components:{Toast:C},computed:{currentUser(){return this.$store.state.auth.user},showAdminBoard(){return!(!this.currentUser||!this.currentUser["roles"])&&this.currentUser["roles"].includes("ROLE_ADMIN")},showStaffBoard(){return!(!this.currentUser||!this.currentUser["roles"])&&this.currentUser["roles"].includes("ROLE_STAFF")}},methods:{logOut(){this.$store.dispatch("auth/logout").then(()=>{this.$router.push("/login")})}},mounted(){y["a"].on("logout",()=>{this.logOut()})},beforeUnmount(){y["a"].remove("logout")}};const N=x()(F,[["render",k]]);var R=N,H=s("6605");const q={class:"container"},B={class:"jumbotron"};function J(e,t,s,r,n,o){return Object(a["z"])(),Object(a["f"])("div",q,[Object(a["g"])("header",B,[Object(a["g"])("h3",null,Object(a["K"])(n.content),1)])])}var $=s("1f57"),M={name:"Home",data(){return{content:""}},mounted(){$["a"].getPublicContent().then(e=>{this.content=e.data},e=>{this.content=e.response&&e.response.data&&e.response.data.message||e.message||e.toString()})}};const K=x()(M,[["render",J]]);var V=K;const Y=e=>(Object(a["C"])("data-v-3cbf8a83"),e=e(),Object(a["A"])(),e),G={class:"col-md-12"},Q={class:"card card-container"},W=Y(()=>Object(a["g"])("img",{id:"profile-img",src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",class:"profile-img-card"},null,-1)),X={class:"form-group"},Z=Y(()=>Object(a["g"])("label",{for:"username"},"Email",-1)),ee={class:"form-group"},te=Y(()=>Object(a["g"])("label",{for:"password"},"Password",-1)),se={class:"form-group"},ae=["disabled"],re={class:"spinner-border spinner-border-sm"},ne=Y(()=>Object(a["g"])("span",null,"Login",-1)),oe={class:"form-group"},ce={key:0,class:"alert alert-danger",role:"alert"};function ie(e,t,s,r,n,o){const c=Object(a["H"])("Field"),i=Object(a["H"])("ErrorMessage"),l=Object(a["H"])("Form");return Object(a["z"])(),Object(a["f"])("div",G,[Object(a["g"])("div",Q,[W,Object(a["j"])(l,{onSubmit:o.handleLogin,"validation-schema":n.schema},{default:Object(a["S"])(()=>[Object(a["g"])("div",X,[Z,Object(a["j"])(c,{name:"username",type:"text",class:"form-control"}),Object(a["j"])(i,{name:"username",class:"error-feedback"})]),Object(a["g"])("div",ee,[te,Object(a["j"])(c,{name:"password",type:"password",class:"form-control"}),Object(a["j"])(i,{name:"password",class:"error-feedback"})]),Object(a["g"])("div",se,[Object(a["g"])("button",{class:"btn btn-primary btn-block",disabled:n.loading},[Object(a["T"])(Object(a["g"])("span",re,null,512),[[a["O"],n.loading]]),ne],8,ae)]),Object(a["g"])("div",oe,[n.message?(Object(a["z"])(),Object(a["f"])("div",ce,Object(a["K"])(n.message),1)):Object(a["e"])("",!0)])]),_:1},8,["onSubmit","validation-schema"])])])}var le=s("7bb1"),ue=s("506a"),de={name:"Login",components:{Form:le["c"],Field:le["b"],ErrorMessage:le["a"]},data(){const e=ue["a"]().shape({username:ue["b"]().required("Username is required!"),password:ue["b"]().required("Password is required!")});return{loading:!1,message:"",schema:e}},computed:{loggedIn(){return this.$store.state.auth.status.loggedIn}},created(){this.loggedIn&&this.$router.push("/profile")},methods:{handleLogin(e){this.loading=!0,e.email=e.username,this.$store.dispatch("auth/login",e).then(()=>{this.$router.push("/profile")},e=>{this.loading=!1,this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString()})}}};s("78f7");const be=x()(de,[["render",ie],["__scopeId","data-v-3cbf8a83"]]);var ge=be;const me=e=>(Object(a["C"])("data-v-6bb4e539"),e=e(),Object(a["A"])(),e),je={class:"col-md-12"},Oe={class:"card card-container"},pe=me(()=>Object(a["g"])("img",{id:"profile-img",src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",class:"profile-img-card"},null,-1)),fe={key:0},he={class:"form-group"},ve=me(()=>Object(a["g"])("label",{for:"username"},"Username",-1)),ke={class:"form-group"},ye=me(()=>Object(a["g"])("label",{for:"email"},"Email",-1)),Se={class:"form-group"},we=me(()=>Object(a["g"])("label",{for:"password"},"Password",-1)),Ie={class:"form-group"},Te=["disabled"],Ue={class:"spinner-border spinner-border-sm"};function _e(e,t,s,r,n,o){const c=Object(a["H"])("Field"),i=Object(a["H"])("ErrorMessage"),l=Object(a["H"])("Form");return Object(a["z"])(),Object(a["f"])("div",je,[Object(a["g"])("div",Oe,[pe,Object(a["j"])(l,{onSubmit:o.handleRegister,"validation-schema":n.schema},{default:Object(a["S"])(()=>[n.successful?Object(a["e"])("",!0):(Object(a["z"])(),Object(a["f"])("div",fe,[Object(a["g"])("div",he,[ve,Object(a["j"])(c,{name:"username",type:"text",class:"form-control"}),Object(a["j"])(i,{name:"username",class:"error-feedback"})]),Object(a["g"])("div",ke,[ye,Object(a["j"])(c,{name:"email",type:"email",class:"form-control"}),Object(a["j"])(i,{name:"email",class:"error-feedback"})]),Object(a["g"])("div",Se,[we,Object(a["j"])(c,{name:"password",type:"password",class:"form-control"}),Object(a["j"])(i,{name:"password",class:"error-feedback"})]),Object(a["g"])("div",Ie,[Object(a["g"])("button",{class:"btn btn-primary btn-block",disabled:n.loading},[Object(a["T"])(Object(a["g"])("span",Ue,null,512),[[a["O"],n.loading]]),Object(a["i"])(" Sign Up ")],8,Te)])]))]),_:1},8,["onSubmit","validation-schema"]),n.message?(Object(a["z"])(),Object(a["f"])("div",{key:0,class:Object(a["s"])(["alert",n.successful?"alert-success":"alert-danger"])},Object(a["K"])(n.message),3)):Object(a["e"])("",!0)])])}var Ee={name:"Register",components:{Form:le["c"],Field:le["b"],ErrorMessage:le["a"]},data(){const e=ue["a"]().shape({username:ue["b"]().required("사용자 ID는 필수 항목입니다.").min(3,"3 글자 이상이어야 합니다.").max(20,"20 글자를 초과할 수 없습니다."),email:ue["b"]().required("이메일은 필수 항목입니다.").email("Email이 잘못되었습니다.").max(50,"50 글자를 초과할 수 없습니다."),password:ue["b"]().required("비밀번호는 필수 항목입니다.").min(6,"6 글자 이상이어야 합니다.").max(40,"40 글자를 초과할 수 없습니다.")});return{successful:!1,loading:!1,message:"",schema:e}},computed:{loggedIn(){return this.$store.state.auth.status.loggedIn}},mounted(){this.loggedIn&&this.$router.push("/profile")},methods:{handleRegister(e){this.message="",this.successful=!1,this.loading=!0,this.$store.dispatch("auth/register",e).then(e=>{this.message=e.message,this.successful=!0,this.loading=!1},e=>{this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.successful=!1,this.loading=!1})}}};s("ad3b");const De=x()(Ee,[["render",_e],["__scopeId","data-v-6bb4e539"]]);var Pe=De;const Ae=()=>s.e("chunk-2d0d03d6").then(s.bind(null,"66aa")),Le=()=>s.e("chunk-2d0c85f8").then(s.bind(null,"5535")),xe=()=>s.e("chunk-2d0aecf7").then(s.bind(null,"0c3a")),ze=()=>s.e("chunk-2d0a4c1e").then(s.bind(null,"0899")),Ce=Object(a["k"])({template:"<div>Not Found</div>"}),Fe=[{path:"/",redirect:"/home"},{path:"/home",component:V},{path:"/login",component:ge},{path:"/register",component:Pe},{path:"/profile",name:"profile",component:Ae},{path:"/admin",name:"admin",component:Le},{path:"/staff",name:"staff",component:xe},{path:"/user",name:"user",component:ze},{path:"/:catchAll(.*)+",component:Ce}],Ne=Object(H["a"])({history:Object(H["b"])(),linkActiveClass:"active",routes:Fe});var Re=Ne,He=s("5502"),qe=s("7424");class Be{getLocalRefreshToken(){const e=JSON.parse(localStorage.getItem("user"));return null===e||void 0===e?void 0:e.refreshToken}getLocalAccessToken(){const e=JSON.parse(localStorage.getItem("user"));return null===e||void 0===e?void 0:e.accessToken}updateLocalAccessToken(e){let t=JSON.parse(localStorage.getItem("user"));t.accessToken=e,localStorage.setItem("user",JSON.stringify(t))}getUser(){return JSON.parse(localStorage.getItem("user"))}setUser(e){console.log(JSON.stringify(e)),localStorage.setItem("user",JSON.stringify(e))}removeUser(){localStorage.removeItem("user")}}var Je=new Be,$e=s("500b");class Me{getDeviceUUID(){let e=(new $e["DeviceUUID"]).get();return console.log("Device UUID: "+e),e}}var Ke=new Me;class Ve{login(e){return e.deviceInfo={deviceId:Ke.getDeviceUUID(),deviceType:"DEVICE_TYPE_ANDROID",notificationToken:"notificationToken"},qe["a"].post("/auth/login",e).then(e=>(e.data.accessToken&&Je.setUser(e.data),e.data))}logout(){const e={};return e.token=Je.getLocalAccessToken(),e.deviceInfo={deviceId:Ke.getDeviceUUID(),deviceType:"DEVICE_TYPE_ANDROID",notificationToken:"notificationToken"},qe["a"].post("/user/logout",e).then(e=>(e.data.success&&Je.removeUser(),e.data))}register({username:e,email:t,password:s}){return qe["a"].post("/auth/register",{username:e,email:t,password:s})}}var Ye=new Ve;const Ge=JSON.parse(localStorage.getItem("user")),Qe=Ge?{status:{loggedIn:!0},user:Ge}:{status:{loggedIn:!1},user:null},We={namespaced:!0,state:Qe,actions:{login({commit:e},t){return Ye.login(t).then(t=>(e("loginSuccess",t),Promise.resolve(t)),t=>(e("loginFailure"),Promise.reject(t)))},logout({commit:e}){Ye.logout(),e("logout")},register({commit:e},t){return Ye.register(t).then(t=>(e("registerSuccess"),Promise.resolve(t.data)),t=>(e("registerFailure"),Promise.reject(t)))},refreshToken({commit:e},t){e("refreshToken",t)}},mutations:{loginSuccess(e,t){e.status.loggedIn=!0,e.user=t},loginFailure(e){e.status.loggedIn=!1,e.user=null},logout(e){e.status.loggedIn=!1,e.user=null},registerSuccess(e){e.status.loggedIn=!1},registerFailure(e){e.status.loggedIn=!1},refreshToken(e,t){e.status.loggedIn=!0,e.user={...e.user,accessToken:t}}},getters:{isLoggedIn:e=>e.status.loggedIn,getUserName:e=>e.user.getUserName}},Xe=Object(He["a"])({modules:{auth:We}});var Ze=Xe,et=(s("4989"),s("ab8b"),s("0449")),tt=(s("4998"),s("ecee")),st=s("ad3d"),at=s("c074");tt["c"].add(at["a"],at["d"],at["e"],at["b"],at["c"]);const rt=e=>{qe["a"].interceptors.request.use(e=>{if("/auth/login"!==e.url){const t=Je.getLocalAccessToken();console.log("axiosInstance.interceptors.request >\nURL: "+e.url),t&&(e.headers["Authorization"]="Bearer "+t)}return e},e=>Promise.reject(e)),qe["a"].interceptors.response.use(e=>e,async t=>{const s=t.config;if("/auth/login"!==s.url&&t.response&&(console.log("axiosInstance.interceptors.request >\nERR STATUS: "+t.response.status),401===t.response.status&&!s._retry)){s._retry=!0;try{const t=await qe["a"].post("/auth/refresh",{refreshToken:Je.getLocalRefreshToken()}),{accessToken:a}=t.data;return e.dispatch("auth/refreshToken",a),Je.updateLocalAccessToken(a),Object(qe["a"])(s)}catch(a){return Promise.reject(a)}}return Promise.reject(t)})};var nt=rt;nt(Ze);const ot=(new Date).getTimezoneOffset(),ct=new Date((new Date).getTime()-60*ot*1e3).toISOString().split("T")[0];Object(a["c"])(R).use(Re).use(Ze).use(et["a"]).component("font-awesome-icon",st["a"]).provide("today",ct).mount("#app")},"6eef":function(e,t,s){},7424:function(e,t,s){"use strict";var a=s("bc3a"),r=s.n(a);const n=r.a.create({baseURL:"http://localhost:8090/api/v1",headers:{"Content-Type":"application/json"}});t["a"]=n},"78f7":function(e,t,s){"use strict";s("f77b")},ad3b:function(e,t,s){"use strict";s("6eef")},cf05:function(e,t,s){e.exports=s.p+"static/img/logo.82b9c7a5.png"},f77b:function(e,t,s){}});
//# sourceMappingURL=app.5ce3e840.js.map